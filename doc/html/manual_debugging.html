<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<meta http-equiv="CONTENT-TYPE" content="text/html; charset=us-ascii"><title>Debugging UltraDefrag</title>

<meta name="GENERATOR" content="OpenOffice.org 2.1 (Win32)">
<meta name="CREATED" content="20070808;19191900">
<meta name="CHANGEDBY" content="Dmitri Arkhangelski">
<meta name="CHANGED" content="20070905;22040900">
<style type="text/css">
<!--
@page { size: 21.59cm 27.94cm; margin: 2cm }
P { margin-bottom: 0.21cm }
H1 { margin-bottom: 0.21cm }
H1.western { font-family: "Arial", sans-serif; font-size: 16pt }
H1.cjk { font-family: "Arial Unicode MS"; font-size: 16pt }
H1.ctl { font-family: "Tahoma"; font-size: 16pt }
H2 { margin-bottom: 0.21cm }
H2.western { font-family: "Arial", sans-serif; font-size: 14pt; font-style: italic }
H2.cjk { font-size: 14pt; font-style: italic }
H2.ctl { font-size: 14pt; font-style: italic }
H3 { margin-bottom: 0.21cm }
H3.western { font-family: "Arial", sans-serif }
-->
</style>
</head>
<body style="direction: ltr; color: rgb(0, 0, 0); background-color: rgb(240, 240, 255); font-family: Times New Roman; font-size: 12pt;" alink="#ff0000" lang="en-US" vlink="#660099">
<h1 class="western" style="" align="center"><font style="font-size: 20pt;" size="5">UltraDefrag
User Manual</font></h1>
<h1 class="western" style="" align="right"><i>Written
by <a href="mailto:zippy1981@gmail.com">Justin Dearing</a></i></h1>
<h1 class="western">Overview</h1>
<p>While the author of UltraDefrag has taken great pains to ensure that
UltraDefrag operates properly, no software is perfect. As such bugs are
inevitable. The author accepts bug reports and will attempt to fix issues that
are brought to his attention. In order to facilitate this the author has built
logging mechanisms into UltraDefrag. This document describes how to get these
logs from UltraDefrag.</p>
<h1 class="western">How UltraDefrag Logs Information</h1>
<p>The actual task of defragmenting your hard drive is performed by a kernel
driver, "ultradfg.sys." This kernel driver logs information via the system
call DbgPrint(). This function writes messages to a special buffer that can
be read by several utilities.</p>
<p>Two utilities that can be used for reading from this buffer are
<a href="http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx">
Sysinternals DebugView</a> and 
<a href="http://www1.alter.org.ua/en/soft/win/dbgdump/dbgdump.php">DbgPrintLog
</a> by <a href="http://alter.org.ua/">Alexander A. Telyatnikov</a> DebugView
is a GUI program that does not include source code and does not work on 
NT 4.0. DbgPrintLog is a console based program that does not work on 64 bit
versions of windows yet. However, it comes with full source code, and works on
NT 4.0 and even NT 3,51. Both applications have a special mode that allows
capture of events at boot time.</p>
<h1>Debugging with DbgPrintLog</h1>
<ol>
	<li>Download DebugView from 
	<a href="http://alter.org.ua/en/soft/win/dbgdump/">Alexander A. Telyatnikov' Website</a>.</li>
	<li>Unzip it and extrace the contents to a new folder. Create a shortcut to it or place it a folder on your
	%PATH% so you can call it from a command line.</li>
	<li>Startup DbgPrintLog. It will output messages to the screen as well as write output to "DbgPrint.log"</li>
	<li>Startup UltraDefrag. Run it to reproduce the crash.</li>
	<li>In a new text file copy the 200 lines or so leading up to the crash. Submit the file as part of a
	<a href="http://sourceforge.net/tracker/?group_id=199532&atid=969870">sourceforge bug report</a>.</li>
</ol>
<h1>Debugging with DebugView</h1>
<ol>
	<li>Download DebugView from 
	<a href="http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx">Microsofts Website</a>.</li>
	<li>Unzip it and copy the executable somewhere. Create a shortcut to it or place it a folder on your
	%PATH% so you can call it from a command line.</li>
	<li>Startup DebugView. Set the following options in the Capture menu:</li>
	<ul>
		<li>Disable "Capture Win32"</li>
		<li>Enable "Capture Kernel"</li>
		<li>Enable "Capture Events"</li>
	</ul>
	<li>In the edit menu select "Clear Dispaly" to remove any messages that may have come up.</li>
	<li>Startup UltraDefrag. Run it to reproduce the crash.</li>
	<li>After UltraDefrag crashes, select "Save As" in the File menu. Save the contents to a file.</li>
	<li>Trim all but the last 200 or so lines from the file. Submit the file as part of a
	<a href="http://sourceforge.net/tracker/?group_id=199532&atid=969870">sourceforge bug report</a>.</li>
</ol>
<h1>Debugging the boot time driver</h1>
<h2>Using DbgPrintLog</h2>
<p>To be written.</p>
<h2>Using DebugView</h2>
<p>To be written.</p>
<hr />
<table align="right">
<tbody>
<tr align="right">
<td><a href="http://www.lua.org/"><img src="images/powered_by_lua.png" alt="Powered by Lua" border="0" height="31" width="124" /></a></td>
<td><a href="http://validator.w3.org/check/referer"><img src="images/valid-xhtml10.png" alt="Valid XHTML 1.0!" border="0" height="31" width="88" /></a></td>
<td><a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=199532&amp;type=1" alt="SourceForge.net Logo" border="0" height="31" width="88" /></a></td>
</tr>
</tbody>
</table>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-2897964-4");
pageTracker._initData();
pageTracker._trackPageview();
</script>
</body></html>
